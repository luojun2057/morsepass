<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>摩尔斯码跟发练习</title>
    <link rel="stylesheet" href="follow.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚡</text></svg>">
</head>
<body>
    <div class="container">
        <h1>摩尔斯码跟发练习</h1>

        <div class="info-panel">
            <div>
                速度:
                <input type="range" id="wpm-slider" min="10" max="50" value="20">
                <span id="wpm-value">20</span> WPM
            </div>
            <div>
                音频频率:
                <input type="number" id="frequency-input" min="350" max="800" value="600" style="width:60px;">
                Hz
            </div>
            <button id="back-btn">返回主页面</button>
        </div>

        <div class="input-section">
            <label>粘贴原文（支持大段文本，仅字母/数字/空格有效）:</label>
            <textarea id="source-text" rows="4" placeholder="例如: SOS HELP PLEASE SEND ASSISTANCE"></textarea>
            <div class="play-controls">
                <button id="play-btn">播放摩尔斯码</button>
                <span id="countdown-display" style="display: none; margin: 0 10px; font-weight: bold; color: #1e40af;"></span> <!-- 倒计时显示在按钮旁边 -->
                <button id="stop-btn" disabled>停止练习</button>
                <button id="clear-btn">清空</button>
            </div>
        </div>

        <!-- 固定发报区 -->
        <div id="transmit-area" class="transmit-area">
            <p id="transmit-hint">● 按下设定按键或点击此处发报</p>
        </div>

        <div class="stats-panel">
            <div>实时速度: <span id="real-wpm">-</span> WPM</div>
            <div>节奏准确率: <span id="accuracy">-</span>%</div>
        </div>

        <div class="result-area">
            <div class="decoded" id="decoded-output">-</div>
            <div class="sequence" id="sequence-output">-</div>
        </div>

        <div class="canvas-container">
            <canvas id="timeline-canvas" width="800" height="60"></canvas>
        </div>

        <div class="result-section">
            <h3>比对结果</h3>
            <div id="comparison-output"></div>
            <div class="stats">
                正确率: <span id="accuracy-rate">-</span>%
            </div>
        </div>

        <div class="hint">
            <p>💡 提示：漏抄显示为 <span style="color:red;">-</span>，错抄显示为 <span style="color:green;">绿色字符</span>，多余输入显示为 <span style="color:orange;">[+N]</span></p>
        </div>

    </div>

    <script src="follow.js"></script>
</body>
</html>